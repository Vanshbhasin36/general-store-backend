<!DOCTYPE html>
<html>
<head>
  <title>Payment</title>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>

<body>
<h2>Pay ₹500</h2>
<button onclick="payNow()">Pay Now</button>

<script>
async function payNow() {
  const token = "PASTE_LOGIN_TOKEN_HERE";

  const res = await fetch(
    "https://general-store-backend.onrender.com/api/payment/create-order",
    {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${token}`
      },
      body: JSON.stringify({ amount: 500 })
    }
  );

  if (!res.ok) {
    alert("Order creation failed");
    return;
  }

  const order = await res.json();

  const options = {
    key: "rzp_test_RryXvudqwrodRl",
    amount: order.amount,
    currency: "INR",
    name: "General Store",
    description: "Order Payment",
    order_id: order.id,
    handler: async function (response) {
      await fetch(
        "https://general-store-backend.onrender.com/api/payment/verify",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${token}`
          },
          body: JSON.stringify(response)
        }
      );

      alert("Payment successful ✅");
    }
  };

  const rzp = new Razorpay(options);
  rzp.open();
}
</script>
</body>
</html>
